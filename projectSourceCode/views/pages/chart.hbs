<div id="currentPrice"></div>
<div id="chartDate" style="margin: 10px 0; font-style: italic;"></div>

<div style="display: flex; flex-wrap: wrap; gap: 20px; align-items: flex-start;">
  <!-- Chart -->
  <div style="flex: 3; min-width: 600px;" id="chartContainer">
    <canvas id="stockChart" width="1000" height="500"></canvas>
  </div>

  <!-- Info -->
  <div
    id="stockInfoBox"
    style="flex: 1; min-width: 250px"
  >
  </div>
</div>

<div id="periodButtons" style="margin: 10px 0;">
  <button data-period="1d" onclick="simulateDay()">1D</button>
  <button data-period="5d" onclick="simulateChart('5d')">5D</button>
  <button data-period="1mo" onclick="simulateChart('1mo')">1M</button>
  <button data-period="3mo" onclick="simulateChart('3mo')">3M</button>
  <button data-period="6mo" onclick="simulateChart('6mo')">6M</button>
  <button data-period="ytd" onclick="simulateChart('ytd')">YTD</button>
  <button data-period="1y" onclick="simulateChart('1y')">1Y</button>
  <button data-period="5y" onclick="simulateChart('5y')">5Y</button>
  <button onclick="chart.resetZoom()">Reset Zoom</button>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/luxon@3/build/global/luxon.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1"></script>
<script src="/script.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const symbol = urlParams.get('symbol');

    if (symbol) {
      setTimeout(() => {
        if (symbol.toLowerCase() === 'portfolio') {
          simulateChart('1d');
        } else {
          if (isMarketClosed()) {
            simulateChart('1d');
          } else {
            startLiveChart();
          }
        }
      }, 300);
    } else {
      console.warn("No ticker symbol provided in the URL.");
    }
  });
</script>